import{r as i}from"./index.DRjF_FHU.js";import{b as y,u as C,P as w,e as z,d as g}from"./index.DOJF3pNe.js";import{j as L}from"./jsx-runtime.s_qdhQ62.js";import{R as H}from"./index.D7yLsxtC.js";function D(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function K(t,e=globalThis?.document){const n=y(t);i.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var X="DismissableLayer",R="dismissableLayer.update",Y="dismissableLayer.pointerDownOutside",q="dismissableLayer.focusOutside",I,F=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x=i.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:f,onDismiss:d,...l}=t,o=i.useContext(F),[c,E]=i.useState(null),m=c?.ownerDocument??globalThis?.document,[,v]=i.useState({}),O=C(e,u=>E(u)),p=Array.from(o.layers),[b]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),_=p.indexOf(b),A=c?p.indexOf(c):-1,k=o.layersWithOutsidePointerEventsDisabled.size>0,T=A>=_,j=J(u=>{const h=u.target,M=[...o.branches].some(N=>N.contains(h));!T||M||(r?.(u),f?.(u),u.defaultPrevented||d?.())},m),S=Q(u=>{const h=u.target;[...o.branches].some(N=>N.contains(h))||(a?.(u),f?.(u),u.defaultPrevented||d?.())},m);return K(u=>{A===o.layers.size-1&&(s?.(u),!u.defaultPrevented&&d&&(u.preventDefault(),d()))},m),i.useEffect(()=>{if(c)return n&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(I=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(c)),o.layers.add(c),U(),()=>{n&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=I)}},[c,m,n,o]),i.useEffect(()=>()=>{c&&(o.layers.delete(c),o.layersWithOutsidePointerEventsDisabled.delete(c),U())},[c,o]),i.useEffect(()=>{const u=()=>v({});return document.addEventListener(R,u),()=>document.removeEventListener(R,u)},[]),L.jsx(w.div,{...l,ref:O,style:{pointerEvents:k?T?"auto":"none":void 0,...t.style},onFocusCapture:D(t.onFocusCapture,S.onFocusCapture),onBlurCapture:D(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:D(t.onPointerDownCapture,j.onPointerDownCapture)})});x.displayName=X;var G="DismissableLayerBranch",W=i.forwardRef((t,e)=>{const n=i.useContext(F),s=i.useRef(null),r=C(e,s);return i.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),L.jsx(w.div,{...t,ref:r})});W.displayName=G;function J(t,e=globalThis?.document){const n=y(t),s=i.useRef(!1),r=i.useRef(()=>{});return i.useEffect(()=>{const a=d=>{if(d.target&&!s.current){let l=function(){B(Y,n,o,{discrete:!0})};const o={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},f=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function Q(t,e=globalThis?.document){const n=y(t),s=i.useRef(!1);return i.useEffect(()=>{const r=a=>{a.target&&!s.current&&B(q,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function U(){const t=new CustomEvent(R);document.dispatchEvent(t)}function B(t,e,n,{discrete:s}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?z(r,a):r.dispatchEvent(a)}var ce=x,ue=W,V="Portal",Z=i.forwardRef((t,e)=>{const{container:n,...s}=t,[r,a]=i.useState(!1);g(()=>a(!0),[]);const f=n||r&&globalThis?.document?.body;return f?H.createPortal(L.jsx(w.div,{...s,ref:e}),f):null});Z.displayName=V;function $(t,e){return i.useReducer((n,s)=>e[n][s]??n,t)}var ee=t=>{const{present:e,children:n}=t,s=te(e),r=typeof n=="function"?n({present:s.isPresent}):i.Children.only(n),a=C(s.ref,ne(r));return typeof n=="function"||s.isPresent?i.cloneElement(r,{ref:a}):null};ee.displayName="Presence";function te(t){const[e,n]=i.useState(),s=i.useRef({}),r=i.useRef(t),a=i.useRef("none"),f=t?"mounted":"unmounted",[d,l]=$(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const o=P(s.current);a.current=d==="mounted"?o:"none"},[d]),g(()=>{const o=s.current,c=r.current;if(c!==t){const m=a.current,v=P(o);t?l("MOUNT"):v==="none"||o?.display==="none"?l("UNMOUNT"):l(c&&m!==v?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),g(()=>{if(e){let o;const c=e.ownerDocument.defaultView??window,E=v=>{const p=P(s.current).includes(v.animationName);if(v.target===e&&p&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",o=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=v=>{v.target===e&&(a.current=P(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{c.clearTimeout(o),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:i.useCallback(o=>{o&&(s.current=getComputedStyle(o)),n(o)},[])}}function P(t){return t?.animationName||"none"}function ne(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function de({prop:t,defaultProp:e,onChange:n=()=>{}}){const[s,r]=se({defaultProp:e,onChange:n}),a=t!==void 0,f=a?t:s,d=y(n),l=i.useCallback(o=>{if(a){const E=typeof o=="function"?o(t):o;E!==t&&d(E)}else r(o)},[a,t,r,d]);return[f,l]}function se({defaultProp:t,onChange:e}){const n=i.useState(t),[s]=n,r=i.useRef(s),a=y(e);return i.useEffect(()=>{r.current!==s&&(a(s),r.current=s)},[s,r,a]),n}export{ue as B,x as D,ee as P,ce as R,Z as a,D as c,de as u};
