import{j as m}from"./jsx-runtime.DYlAVkgF.js";import{r as o}from"./index.C3JiJ1qr.js";import{M as P,u as j,P as $,a as k,L as z,h as L}from"./proxy.DzlDPGYA.js";class S extends o.Component{getSnapshotBeforeUpdate(i){const t=this.props.childRef.current;if(t&&i.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B({children:e,isPresent:i}){const t=o.useId(),r=o.useRef(null),c=o.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=o.useContext(P);return o.useInsertionEffect(()=>{const{width:l,height:n,top:u,left:h}=c.current;if(i||!r.current||!l||!n)return;r.current.dataset.motionPopId=t;const s=document.createElement("style");return a&&(s.nonce=a),document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${n}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(s)}},[i]),m.jsx(S,{isPresent:i,childRef:r,sizeRef:c,children:o.cloneElement(e,{ref:r})})}const A=({children:e,initial:i,isPresent:t,onExitComplete:r,custom:c,presenceAffectsLayout:a,mode:l})=>{const n=j(D),u=o.useId(),h=o.useMemo(()=>({id:u,initial:i,isPresent:t,custom:c,onExitComplete:s=>{n.set(s,!0);for(const f of n.values())if(!f)return;r&&r()},register:s=>(n.set(s,!1),()=>n.delete(s))}),a?[Math.random()]:[t]);return o.useMemo(()=>{n.forEach((s,f)=>n.set(f,!1))},[t]),o.useEffect(()=>{!t&&!n.size&&r&&r()},[t]),l==="popLayout"&&(e=m.jsx(B,{isPresent:t,children:e})),m.jsx($.Provider,{value:h,children:e})};function D(){return new Map}const E=e=>e.key||"";function M(e){const i=[];return o.Children.forEach(e,t=>{o.isValidElement(t)&&i.push(t)}),i}const F=({children:e,exitBeforeEnter:i,custom:t,initial:r=!0,onExitComplete:c,presenceAffectsLayout:a=!0,mode:l="sync"})=>{const n=o.useMemo(()=>M(e),[e]),u=n.map(E),h=o.useRef(!0),s=o.useRef(n),f=j(()=>new Map),[g,v]=o.useState(n),[x,I]=o.useState(n);k(()=>{h.current=!1,s.current=n;for(let p=0;p<x.length;p++){const d=E(x[p]);u.includes(d)?f.delete(d):f.get(d)!==!0&&f.set(d,!1)}},[x,u.length,u.join("-")]);const w=[];if(n!==g){let p=[...n];for(let d=0;d<x.length;d++){const C=x[d],R=E(C);u.includes(R)||(p.splice(d,0,C),w.push(C))}l==="wait"&&w.length&&(p=w),I(M(p)),v(n);return}const{forceRender:y}=o.useContext(z);return m.jsx(m.Fragment,{children:x.map(p=>{const d=E(p),C=n===x||u.includes(d),R=()=>{if(f.has(d))f.set(d,!0);else return;let b=!0;f.forEach(V=>{V||(b=!1)}),b&&(y?.(),I(s.current),c&&c())};return m.jsx(A,{isPresent:C,initial:!h.current||r?void 0:!1,custom:C?void 0:t,presenceAffectsLayout:a,mode:l,onExitComplete:C?void 0:R,children:p},d)})})};function K(e,i,t){return typeof e=="string"?e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const O={some:0,all:1};function U(e,i,{root:t,margin:r,amount:c="some"}={}){const a=K(e),l=new WeakMap,n=h=>{h.forEach(s=>{const f=l.get(s.target);if(s.isIntersecting!==!!f)if(s.isIntersecting){const g=i(s);typeof g=="function"?l.set(s.target,g):u.unobserve(s.target)}else f&&(f(s),l.delete(s.target))})},u=new IntersectionObserver(n,{root:t,rootMargin:r,threshold:typeof c=="number"?c:O[c]});return a.forEach(h=>u.observe(h)),()=>u.disconnect()}function W(e,{root:i,margin:t,amount:r,once:c=!1}={}){const[a,l]=o.useState(!1);return o.useEffect(()=>{if(!e.current||c&&a)return;const n=()=>(l(!0),c?void 0:()=>l(!1)),u={root:i&&i.current||void 0,margin:t,amount:r};return U(e.current,n,u)},[i,e,t,c,r]),a}function T({children:e,className:i,variant:t,duration:r=.4,delay:c=0,yOffset:a=6,inView:l=!1,inViewMargin:n="-50px",blur:u="6px"}){const h=o.useRef(null),s=W(h,{once:!0,margin:n}),f=!l||s,g={hidden:{y:a,opacity:0,filter:`blur(${u})`},visible:{y:-a,opacity:1,filter:"blur(0px)"}},v=t||g;return m.jsx(F,{children:m.jsx(L.div,{id:"container",ref:h,initial:"hidden",animate:f?"visible":"hidden",exit:"hidden",variants:v,transition:{delay:.04+c,duration:r,ease:"easeOut"},className:i,children:e})})}export{T as default};
