import{r as S,R as C}from"./index.DRjF_FHU.js";import{j as I}from"./jsx-runtime.s_qdhQ62.js";import{u as N,S as P}from"./index.DOJF3pNe.js";function h(t,i=[]){let u=[];function R(r,o){const n=S.createContext(o),s=u.length;u=[...u,o];function d(p){const{scope:_,children:c,...e}=p,f=_?.[t][s]||n,l=S.useMemo(()=>e,Object.values(e));return I.jsx(f.Provider,{value:l,children:c})}function M(p,_){const c=_?.[t][s]||n,e=S.useContext(c);if(e)return e;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${r}\``)}return d.displayName=r+"Provider",[d,M]}const a=()=>{const r=u.map(o=>S.createContext(o));return function(n){const s=n?.[t]||r;return S.useMemo(()=>({[`__scope${t}`]:{...n,[t]:s}}),[n,s])}};return a.scopeName=t,[R,O(a,...i)]}function O(...t){const i=t[0];if(t.length===1)return i;const u=()=>{const R=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(r){const o=R.reduce((n,{useScope:s,scopeName:d})=>{const p=s(r)[`__scope${d}`];return{...n,...p}},{});return S.useMemo(()=>({[`__scope${i.scopeName}`]:o}),[o])}};return u.scopeName=i.scopeName,u}function y(t){const i=t+"CollectionProvider",[u,R]=h(i),[a,r]=u(i,{collectionRef:{current:null},itemMap:new Map}),o=c=>{const{scope:e,children:f}=c,l=C.useRef(null),m=C.useRef(new Map).current;return I.jsx(a,{scope:e,itemMap:m,collectionRef:l,children:f})};o.displayName=i;const n=t+"CollectionSlot",s=C.forwardRef((c,e)=>{const{scope:f,children:l}=c,m=r(n,f),x=N(e,m.collectionRef);return I.jsx(P,{ref:x,children:l})});s.displayName=n;const d=t+"CollectionItemSlot",M="data-radix-collection-item",p=C.forwardRef((c,e)=>{const{scope:f,children:l,...m}=c,x=C.useRef(null),E=N(e,x),v=r(d,f);return C.useEffect(()=>(v.itemMap.set(x,{ref:x,...m}),()=>void v.itemMap.delete(x))),I.jsx(P,{[M]:"",ref:E,children:l})});p.displayName=d;function _(c){const e=r(t+"CollectionConsumer",c);return C.useCallback(()=>{const l=e.collectionRef.current;if(!l)return[];const m=Array.from(l.querySelectorAll(`[${M}]`));return Array.from(e.itemMap.values()).sort((v,A)=>m.indexOf(v.ref.current)-m.indexOf(A.ref.current))},[e.collectionRef,e.itemMap])}return[{Provider:o,Slot:s,ItemSlot:p},_,R]}export{h as a,y as c};
